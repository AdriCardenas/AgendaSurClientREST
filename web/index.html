<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <title>
            Agenda Sur
        </title>
    </head>
    <body>
        <script type="text/javascript">
            function handleClientLoad() {
                // Loads the client library and the auth2 library together for efficiency.
                // Loading the auth2 library is optional here since `gapi.client.init` function will load
                // it if not already loaded. Loading it upfront can save one network request.
                gapi.load('client:auth2', initClient);
            }

            function handleConnection() {
                // Listen for sign-in state changes.
                gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

                // Handle the initial sign-in state.
                updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
            }

            function initClient() {
                // Initialize the client with API key and People API, and initialize OAuth with an
                // OAuth 2.0 client ID and scopes (space delimited string) to request access.
                var initialized = gapi.client.init({
                    apiKey: 'AIzaSyD-YkjNcqoEH4GND279kbs8YkW0AF5J3pg',
                    discoveryDocs: ["https://people.googleapis.com/$discovery/rest?version=v1"],
                    clientId: '1095663528592-3uacq2gga1bien0l9jqfh22i1o6qaf7f.apps.googleusercontent.com',
                    scope: 'profile'
                });
                initialized.then(handleConnection);
            }

            function updateSigninStatus(isSignedIn) {
                // When signin status changes, this function is called.
                // If the signin status is changed to signedIn, we make an API call.
                if (isSignedIn) {
                    alert('Conectado correctamente');
                    makeApiCall();
                }
            }

            function handleSignInClick(event) {
                // Ideally the button should only show up after gapi.client.init finishes, so that this
                // handler won't be called before OAuth is initialized.
                gapi.auth2.getAuthInstance().signIn();
            }

            function handleSignOutClick(event) {
                gapi.auth2.getAuthInstance().signOut();
            }

            function makeApiCall() {
                // Make an API call to the People API, and print the user's given name.
                gapi.client.people.people.get({
                    'resourceName': 'people/me',
                    'requestMask.includeField': 'person.names'
                }).then(function (response) {
                    console.log(response);
                    console.log('Hello, ' + response.result.names[0].givenName);
                    alert('Hola, ' + response.result.names[0].givenName);
                    window.location = "listadoEventos.html";
                }, function (reason) {
                    console.log('Error: ' + reason.result.error.message);
                });
            }
        </script>
        <script async defer src="https://apis.google.com/js/api.js"
                onload="this.onload = handleClientLoad()">
        </script>

        <div class="container">
            <div class="omb_login">
                <h3 class="omb_authTitle">Login or <a href="#">Sign up</a></h3>
                <div class="row omb_row-sm-offset-3 omb_socialButtons">
                    <div class="col-xs-4 col-sm-2">
                        <a href="#" class="btn btn-lg btn-block omb_btn-facebook" >
                            <i class="fa fa-facebook visible-xs"></i>
                            <span class="hidden-xs">Facebook</span>
                        </a>
                    </div>
                    <div class="col-xs-4 col-sm-2">
                        <a href="#" class="btn btn-lg btn-block omb_btn-twitter">
                            <i class="fa fa-twitter visible-xs"></i>
                            <span class="hidden-xs">Twitter</span>
                        </a>
                    </div>	
                    <div class="col-xs-4 col-sm-2">
                        <a href="#" class="btn btn-lg btn-block omb_btn-google" onclick="handleSignInClick()">
                            <i class="fa fa-google-plus visible-xs"></i>
                            <span class="hidden-xs">Google+</span>
                        </a>
                    </div>	
                </div>

                <div class="row omb_row-sm-offset-3 omb_loginOr">
                    <div class="col-xs-12 col-sm-6">
                        <hr class="omb_hrOr">
                        <span class="omb_spanOr">or</span>
                    </div>
                </div>

                <div class="row omb_row-sm-offset-3">
                    <div class="col-xs-12 col-sm-6">	
                        <form class="omb_loginForm" action="" autocomplete="off" method="POST">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-user"></i></span>
                                <input type="text" class="form-control" name="username" placeholder="email address">
                            </div>
                            <span class="help-block"></span>

                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-lock"></i></span>
                                <input  type="password" class="form-control" name="password" placeholder="Password">
                            </div>
                            <span class="help-block">Password error</span>

                            <button class="btn btn-lg btn-block" type="submit">Login</button>
                        </form>
                    </div>
                </div>
                <div class="row omb_row-sm-offset-3">
                    <div class="col-xs-12 col-sm-3">
                        <label class="checkbox">
                            <input type="checkbox" value="remember-me">Remember Me
                        </label>
                    </div>
                    <div class="col-xs-12 col-sm-3">
                        <p class="omb_forgotPwd">
                            <a href="#">Forgot password?</a>
                        </p>
                    </div>
                </div>	    	
            </div>
        </div>
        <!-- <button id="signin-button" onclick="handleSignInClick()">Sign In</button>
        <button id="signout-button" onclick="handleSignOutClick()">Sign Out</button> -->
    </body>
</html>
